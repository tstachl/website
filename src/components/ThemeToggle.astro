<label class="cursor-pointer">
  <div class="relative">
    <input type="checkbox" class="sr-only">
    <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
    <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
      </svg>
    </div>
  </div>
</label>

<style>
  input:checked ~ .dot {
    transform: translateX(100%);
    --tw-text-opacity: 1;
    background-color: rgba(255, 55, 74, var(--tw-text-opacity));
  }
</style>

<script>
document.querySelector("input").addEventListener("change", (e) => {
  if (e.target.checked) {
    document.documentElement.classList.add('dark');
    localStorage.theme = 'dark';
  } else {
    document.documentElement.classList.remove('dark');
    localStorage.theme = 'light';
  }
});

if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
  document.querySelector("input").click();
}
</script>