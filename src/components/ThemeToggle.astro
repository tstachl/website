<label class="cursor-pointer theme-toggle">
  <div class="relative inline-block group">
    <input type="checkbox" class="peer sr-only">
    <div class="flex bg-gray-600 w-14 h-8 rounded-full">
      <span class="flex-1 text-center leading-8">ðŸŒœ</span>
      <span class="flex-1 text-center leading-8">ðŸŒž</span>
    </div>
    <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition group-hover:shadow-toggle peer-checked:translate-x-full peer-checked:text-opacity-100"></div>
  </div>
</label>

<script hoist>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelector(".theme-toggle input")
          .addEventListener("change", (e) => {
            if (e.target.checked) {
              document.documentElement.classList.add('dark');
              localStorage.theme = 'dark';
            } else {
              document.documentElement.classList.remove('dark');
              localStorage.theme = 'light';
            }
          });
  if (
    localStorage.theme === 'dark' || (
      !('theme' in localStorage) 
      && window.matchMedia('(prefers-color-scheme: dark)').matches
    )) {
      document.querySelector(".theme-toggle input").click();
    }
});
</script>